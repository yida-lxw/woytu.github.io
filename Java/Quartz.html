<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Quartz | Bajins</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/images/icons/logo.png">
    <link rel="apple-touch-icon" href="/images/icons/logo.png">
    <link rel="manifest" href="/manifest.json">
    <script type="text/javascript" src="/assets/js/load.js"></script>
    <meta name="description" content="个人笔记">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/images/icons/logo.png">
    <meta name="msapplication-TileColor" content="#ffffff">
    <meta name="keywords" content="bajins,vue,vuepress,vuepress-theme,theme,主题,vuepress主题,blog,vuepress-blog,java,python,shell,sql,golang,script,shell script,nginx,windows,去广告,androd,google drive,one drive,idea,eclipse,git,小程序">
    <meta name="referrer" content="never">
    
    <link rel="preload" href="/assets/css/0.styles.d68eb176.css" as="style"><link rel="preload" href="/assets/js/app.9ddf54ff.js" as="script"><link rel="preload" href="/assets/js/4.7882e3c9.js" as="script"><link rel="preload" href="/assets/js/1.1cbc9434.js" as="script"><link rel="preload" href="/assets/js/34.af69343e.js" as="script"><link rel="preload" href="/assets/js/9.47cf28c1.js" as="script"><link rel="prefetch" href="/assets/js/10.27d5e327.js"><link rel="prefetch" href="/assets/js/11.4bdcea6a.js"><link rel="prefetch" href="/assets/js/12.c74dd4ce.js"><link rel="prefetch" href="/assets/js/13.e5a6205a.js"><link rel="prefetch" href="/assets/js/14.dca8100b.js"><link rel="prefetch" href="/assets/js/15.0c892e95.js"><link rel="prefetch" href="/assets/js/16.b32e2c94.js"><link rel="prefetch" href="/assets/js/17.8b22ee76.js"><link rel="prefetch" href="/assets/js/18.44756a3b.js"><link rel="prefetch" href="/assets/js/19.3aa27d7c.js"><link rel="prefetch" href="/assets/js/20.1c6ac0e3.js"><link rel="prefetch" href="/assets/js/21.d4ea9776.js"><link rel="prefetch" href="/assets/js/22.3f0aa30e.js"><link rel="prefetch" href="/assets/js/23.b78bd0c8.js"><link rel="prefetch" href="/assets/js/24.c354b902.js"><link rel="prefetch" href="/assets/js/25.d191a287.js"><link rel="prefetch" href="/assets/js/26.a35715e1.js"><link rel="prefetch" href="/assets/js/27.27100077.js"><link rel="prefetch" href="/assets/js/28.9b51e51a.js"><link rel="prefetch" href="/assets/js/29.b3d46d62.js"><link rel="prefetch" href="/assets/js/30.8828469d.js"><link rel="prefetch" href="/assets/js/31.72f8bb34.js"><link rel="prefetch" href="/assets/js/32.6df74aba.js"><link rel="prefetch" href="/assets/js/33.0130a80e.js"><link rel="prefetch" href="/assets/js/35.57065584.js"><link rel="prefetch" href="/assets/js/36.abc155a9.js"><link rel="prefetch" href="/assets/js/37.d1f5c07d.js"><link rel="prefetch" href="/assets/js/38.162561d6.js"><link rel="prefetch" href="/assets/js/39.b429e787.js"><link rel="prefetch" href="/assets/js/40.1200b6e3.js"><link rel="prefetch" href="/assets/js/41.69c891cb.js"><link rel="prefetch" href="/assets/js/42.80299886.js"><link rel="prefetch" href="/assets/js/43.a4f48d7b.js"><link rel="prefetch" href="/assets/js/44.eb58e604.js"><link rel="prefetch" href="/assets/js/45.0f945e94.js"><link rel="prefetch" href="/assets/js/46.71543e54.js"><link rel="prefetch" href="/assets/js/47.5c3c8bfe.js"><link rel="prefetch" href="/assets/js/48.ef63e1c0.js"><link rel="prefetch" href="/assets/js/49.6f3d021c.js"><link rel="prefetch" href="/assets/js/5.4b93ee0e.js"><link rel="prefetch" href="/assets/js/50.926d43d4.js"><link rel="prefetch" href="/assets/js/51.e0f166c0.js"><link rel="prefetch" href="/assets/js/52.494c0154.js"><link rel="prefetch" href="/assets/js/53.f00d4541.js"><link rel="prefetch" href="/assets/js/54.9dcaa54b.js"><link rel="prefetch" href="/assets/js/55.6eb7b37b.js"><link rel="prefetch" href="/assets/js/56.654f41db.js"><link rel="prefetch" href="/assets/js/57.13a64a75.js"><link rel="prefetch" href="/assets/js/58.451ce378.js"><link rel="prefetch" href="/assets/js/59.1e0db7ba.js"><link rel="prefetch" href="/assets/js/6.99291bce.js"><link rel="prefetch" href="/assets/js/60.0c0334b0.js"><link rel="prefetch" href="/assets/js/61.74615d5a.js"><link rel="prefetch" href="/assets/js/62.ee3957f8.js"><link rel="prefetch" href="/assets/js/63.f2c959dc.js"><link rel="prefetch" href="/assets/js/64.d4566f6b.js"><link rel="prefetch" href="/assets/js/65.a9c46264.js"><link rel="prefetch" href="/assets/js/66.03a00c2d.js"><link rel="prefetch" href="/assets/js/67.d254c952.js"><link rel="prefetch" href="/assets/js/68.9ca363ef.js"><link rel="prefetch" href="/assets/js/69.fbe09a71.js"><link rel="prefetch" href="/assets/js/7.b36f2f9b.js"><link rel="prefetch" href="/assets/js/70.5c123f01.js"><link rel="prefetch" href="/assets/js/71.a6bd5368.js"><link rel="prefetch" href="/assets/js/72.d66e6ed1.js"><link rel="prefetch" href="/assets/js/73.b31a0e99.js"><link rel="prefetch" href="/assets/js/74.1e040f9d.js"><link rel="prefetch" href="/assets/js/75.5817ef1a.js"><link rel="prefetch" href="/assets/js/76.16a5a721.js"><link rel="prefetch" href="/assets/js/77.f3a6c84f.js"><link rel="prefetch" href="/assets/js/78.9b604978.js"><link rel="prefetch" href="/assets/js/79.fda2f7dc.js"><link rel="prefetch" href="/assets/js/8.ad39a300.js"><link rel="prefetch" href="/assets/js/80.b8fda4f1.js"><link rel="prefetch" href="/assets/js/81.0df361a2.js"><link rel="prefetch" href="/assets/js/82.47552a8c.js"><link rel="prefetch" href="/assets/js/83.5ba7f42c.js"><link rel="prefetch" href="/assets/js/84.5e47b5cb.js"><link rel="prefetch" href="/assets/js/85.af1684a1.js"><link rel="prefetch" href="/assets/js/86.9cce92fe.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.fd7c5a4a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d68eb176.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-2d5f533b><div data-v-2d5f533b><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-2d5f533b data-v-2d5f533b><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-2d5f533b data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>Bajins</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>Bajins</span>
            
          <!---->
          2020
        </a></span></div></div> <div class="hide" data-v-2d5f533b><header class="navbar" data-v-2d5f533b><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/icons/logo.png" alt="Bajins" class="logo"> <span class="site-name">Bajins</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Go/" class="nav-link"><i class="iconfont undefined"></i>
  Go
</a></div><div class="nav-item"><a href="/IDE/" class="nav-link"><i class="iconfont undefined"></i>
  IDE
</a></div><div class="nav-item"><a href="/Java/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  Java
</a></div><div class="nav-item"><a href="/Other/" class="nav-link"><i class="iconfont undefined"></i>
  Other
</a></div><div class="nav-item"><a href="/SQL/" class="nav-link"><i class="iconfont undefined"></i>
  SQL
</a></div><div class="nav-item"><a href="/Shell/" class="nav-link"><i class="iconfont undefined"></i>
  Shell
</a></div><div class="nav-item"><a href="/System/" class="nav-link"><i class="iconfont undefined"></i>
  System
</a></div><div class="nav-item"><a href="/Web/" class="nav-link"><i class="iconfont undefined"></i>
  Web
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      更多资源
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.woetu.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  WeChat小程序
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/woytu/tool-gin" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  获取XShell
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://gd.bajins.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  GoogleDrive
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://od.bajins.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  OneDrive
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/files.html" class="nav-link"><i class="iconfont undefined"></i>
  文件
</a></li><li class="dropdown-subitem"><a href="/Other/Bookmarks.html" class="nav-link"><i class="iconfont undefined"></i>
  书签锦集
</a></li><li class="dropdown-subitem"><a href="/Other/Windows软件.html" class="nav-link"><i class="iconfont undefined"></i>
  Windows软件
</a></li><li class="dropdown-subitem"><a href="/Other/Markdown.html#工具" class="nav-link"><i class="iconfont undefined"></i>
  Markdown工具
</a></li></ul></li></ul></div></div> <a href="https://github.com/woytu/notes-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask" data-v-2d5f533b></div> <aside class="sidebar" data-v-2d5f533b><div class="personal-info-wrapper" data-v-ca798c94 data-v-2d5f533b><!----> <h3 class="name" data-v-ca798c94>
    Bajins
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>0</h3> <h6 data-v-ca798c94>文章</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>0</h3> <h6 data-v-ca798c94>标签</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/Go/" class="nav-link"><i class="iconfont undefined"></i>
  Go
</a></div><div class="nav-item"><a href="/IDE/" class="nav-link"><i class="iconfont undefined"></i>
  IDE
</a></div><div class="nav-item"><a href="/Java/" class="nav-link router-link-active"><i class="iconfont undefined"></i>
  Java
</a></div><div class="nav-item"><a href="/Other/" class="nav-link"><i class="iconfont undefined"></i>
  Other
</a></div><div class="nav-item"><a href="/SQL/" class="nav-link"><i class="iconfont undefined"></i>
  SQL
</a></div><div class="nav-item"><a href="/Shell/" class="nav-link"><i class="iconfont undefined"></i>
  Shell
</a></div><div class="nav-item"><a href="/System/" class="nav-link"><i class="iconfont undefined"></i>
  System
</a></div><div class="nav-item"><a href="/Web/" class="nav-link"><i class="iconfont undefined"></i>
  Web
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont undefined"></i>
      更多资源
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.woetu.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  WeChat小程序
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://github.com/woytu/tool-gin" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  获取XShell
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://gd.bajins.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  GoogleDrive
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-subitem"><a href="https://od.bajins.com" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont undefined"></i>
  OneDrive
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4></h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/files.html" class="nav-link"><i class="iconfont undefined"></i>
  文件
</a></li><li class="dropdown-subitem"><a href="/Other/Bookmarks.html" class="nav-link"><i class="iconfont undefined"></i>
  书签锦集
</a></li><li class="dropdown-subitem"><a href="/Other/Windows软件.html" class="nav-link"><i class="iconfont undefined"></i>
  Windows软件
</a></li><li class="dropdown-subitem"><a href="/Other/Markdown.html#工具" class="nav-link"><i class="iconfont undefined"></i>
  Markdown工具
</a></li></ul></li></ul></div></div> <a href="https://github.com/woytu/notes-vuepress" target="_blank" rel="noopener noreferrer" class="repo-link"><i class="iconfont reco-github"></i>
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav> <ul class="sidebar-links"><li><a href="/Java/Annotation.html" class="sidebar-link">Annotation</a></li><li><a href="/Java/JDK安装配置.html" class="sidebar-link">JDK安装配置</a></li><li><a href="/Java/JDK工具.html" class="sidebar-link">JDK工具</a></li><li><a href="/Java/Java笔记.html" class="sidebar-link">Java笔记</a></li><li><a href="/Java/ORM.html" class="sidebar-link">ORM</a></li><li><a href="/Java/Quartz.html" aria-current="page" class="active sidebar-link">Quartz</a></li><li><a href="/Java/" aria-current="page" class="sidebar-link">Java</a></li><li><a href="/Java/Spring.html" class="sidebar-link">Spring</a></li><li><a href="/Java/Tomcat.html" class="sidebar-link">Tomcat</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-2d5f533b><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e></h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>Bajins</span>
            
          <!---->
          2020
        </a></span></div></div> <div data-v-2d5f533b><main class="page" style="padding-right:0;"><div class="page-title" style="display:none;"><h1 class="title">Quartz</h1> <div data-v-3b7f5bdf><i class="iconfont reco-account" data-v-3b7f5bdf><span data-v-3b7f5bdf>Bajins</span></i> <!----> <i class="iconfont reco-eye" data-v-3b7f5bdf><span id="/Java/Quartz.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-3b7f5bdf><a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;"></a></span></i> <!----></div></div> <div class="theme-reco-content content__default" style="display:none;"><h1 id="quartz"><a href="#quartz" class="header-anchor">#</a> Quartz</h1> <p></p><div class="table-of-contents"><ul><li><a href="#flag">Flag</a></li><li><a href="#job的状态与并发">Job的状态与并发</a></li><li><a href="#quartz的misfire处理规则">Quartz的Misfire处理规则</a></li><li><a href="#quartzapi">QuartzAPI</a><ul><li><a href="#触发器接口基本介绍">触发器接口基本介绍</a></li><li><a href="#触发器实现类">触发器实现类</a></li><li><a href="#调度器建造者">调度器建造者</a></li><li><a href="#触发器建造者">触发器建造者</a></li><li><a href="#simpletrigger简单触发器">SimpleTrigger简单触发器</a></li><li><a href="#crontriger-cron触发器">CronTriger-Cron触发器</a></li><li><a href="#dailytimeintervaltrigger-日期触发">DailyTimeIntervalTrigger-日期触发</a></li><li><a href="#calendarintervaltrigger-日历触发">CalendarIntervalTrigger-日历触发</a></li></ul></li></ul></div><p></p> <h2 id="flag"><a href="#flag" class="header-anchor">#</a> Flag</h2> <ul><li><a href="https://github.com/apache/shardingsphere-elasticjob" target="_blank" rel="noopener noreferrer">https://github.com/apache/shardingsphere-elasticjob<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/attemper/attemper" target="_blank" rel="noopener noreferrer">https://github.com/attemper/attemper<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="job的状态与并发"><a href="#job的状态与并发" class="header-anchor">#</a> Job的状态与并发</h2> <ul><li><code>@DisallowConcurrentExecution</code> 同一时间将只有一个Job实例被执行。</li></ul> <blockquote><p>如：ReportJob有个实例为ReportForJoe，那么同一时间只有一个ReportForJoe被执行。而ReportForMike等都可以执行。</p></blockquote> <ul><li><code>@PersistJobDataAfterExecution</code>，在Job被执行结束后，将会更新JobDataMap，这样下次Job执行后就会使用新的值而不是初始值。</li></ul> <blockquote><p>如果使用<code>@PersistJobDataAfterExecution</code>注解，推荐也使用<code>@DisallowConcurrentExecution</code>注解，这是为了避免并发问题导致数据紊乱。</p></blockquote> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addJob</span><span class="token punctuation">(</span><span class="token class-name">Loan</span> loan<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token class-name">JobDetail</span> jobDetail1 <span class="token operator">=</span> <span class="token class-name">JobBuilder</span><span class="token punctuation">.</span><span class="token function">newJob</span><span class="token punctuation">(</span><span class="token class-name">AutoInvestAfterLoanPassed</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token comment">// 创建builder，(jobDetail的预准备对象)</span>
			<span class="token comment">// 通过builder调用withIdentity()去设置builder的名字和分组,最后通过build()方法获得一个jobDetail对象</span>
			<span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span>loan<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ScheduleConstants</span><span class="token punctuation">.</span><span class="token class-name">JobGroup</span><span class="token punctuation">.</span>AUTO_INVEST_AFTER_LOAN_PASSED<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	jobDetail1<span class="token punctuation">.</span><span class="token function">getJobDataMap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token class-name">AutoInvestAfterLoanPassed</span><span class="token punctuation">.</span>LOAN_ID<span class="token punctuation">,</span> loan<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// FIXME:需判断DELAY_TIME是否大于0</span>
	<span class="token class-name">Date</span> startDate1 <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">addMinute</span><span class="token punctuation">(</span><span class="token punctuation">(</span>loan<span class="token punctuation">.</span><span class="token function">getPublishTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> loan<span class="token punctuation">.</span><span class="token function">getPublishTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
			<span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span>configService<span class="token punctuation">.</span><span class="token function">getConfigValue</span><span class="token punctuation">(</span><span class="token class-name">ConfigConstants</span><span class="token punctuation">.</span><span class="token class-name">AutoInvest</span><span class="token punctuation">.</span>DELAY_TIME<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

	<span class="token class-name">Date</span> enDate <span class="token operator">=</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token function">addMonth</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 定义一个触发器trigger对象，用来执行jobDetail</span>
	<span class="token class-name">SimpleTrigger</span> trigger1 <span class="token operator">=</span> <span class="token class-name">TriggerBuilder</span><span class="token punctuation">.</span><span class="token function">newTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//创建一个触发器trigger对象</span>
			<span class="token comment">// 设置触发器的名字和分组</span>
			<span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span>loan<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token class-name">ScheduleConstants</span><span class="token punctuation">.</span><span class="token class-name">TriggerGroup</span><span class="token punctuation">.</span>AUTO_INVEST_AFTER_LOAN_PASSED<span class="token punctuation">)</span>
			<span class="token comment">// 设置以哪种方式执行JobDetail：</span>
			<span class="token comment">// 一、SimpleScheduleBuilder 简单任务的重复执行SimpleScheduleBuilder.repeatSecondlyForever(5)</span>
			<span class="token comment">// 二、CronTrigger 按日历触发任务CronScheduleBuilder.cronSchedule(&quot;0 17 1 * * ?&quot;)</span>
			<span class="token comment">// 以及执行一次JobDetail的间隔时间,以及执行到什么时候</span>
			<span class="token punctuation">.</span><span class="token function">forJob</span><span class="token punctuation">(</span>jobDetail1<span class="token punctuation">)</span>
			<span class="token comment">// 每隔5分钟执行一次,永远重复不限制次数执行,失效之后，再启动马上执行</span>
			<span class="token punctuation">.</span><span class="token function">withSchedule</span><span class="token punctuation">(</span><span class="token class-name">SimpleScheduleBuilder</span><span class="token punctuation">.</span><span class="token function">repeatMinutelyForever</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
			<span class="token comment">//设置触发器开始执行JobDetail的起始时间，还有startNow()立即执行</span>
			<span class="token punctuation">.</span><span class="token function">startAt</span><span class="token punctuation">(</span>startDate1<span class="token punctuation">)</span>
			<span class="token comment">// 结束时间 endAt（“结束的时间”），实现在任务执后自动销毁任务</span>
			<span class="token punctuation">.</span><span class="token function">endAt</span><span class="token punctuation">(</span>enDate<span class="token punctuation">)</span>
			<span class="token comment">// 最终获得一个Trigger对象</span>
			<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">try</span> <span class="token punctuation">{</span>
		<span class="token comment">// 调度容器设置JobDetail和Trigger</span>
		scheduler<span class="token punctuation">.</span><span class="token function">scheduleJob</span><span class="token punctuation">(</span>jobDetail1<span class="token punctuation">,</span> trigger1<span class="token punctuation">)</span><span class="token punctuation">;</span>
		
		<span class="token comment">// 启动</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>scheduler<span class="token punctuation">.</span><span class="token function">isShutdown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			scheduler<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>

		<span class="token comment">// 获取触发器状态</span>
		<span class="token class-name">TriggerState</span> triggerState <span class="token operator">=</span> scheduler<span class="token punctuation">.</span><span class="token function">getTriggerState</span><span class="token punctuation">(</span>trigger<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment">// 判断触发器状态是否为暂停</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">TriggerState</span><span class="token punctuation">.</span>PAUSED<span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span>triggerState<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// 如果触发器为暂停就恢复启动</span>
			scheduler<span class="token punctuation">.</span><span class="token function">resumeTrigger</span><span class="token punctuation">(</span>trigger<span class="token punctuation">.</span><span class="token function">getKey</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">if</span> <span class="token punctuation">(</span>log<span class="token punctuation">.</span><span class="token function">isDebugEnabled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">debug</span><span class="token punctuation">(</span><span class="token string">&quot;添加调度成功,时间：{}&quot;</span><span class="token punctuation">,</span> <span class="token class-name">DateUtil</span><span class="token punctuation">.</span><span class="token class-name">DateToString</span><span class="token punctuation">(</span>startDate1<span class="token punctuation">,</span> <span class="token class-name">DateStyle</span><span class="token punctuation">.</span>YYYY_MM_DD_HH_MM_SS_CN<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">SchedulerException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">throw</span> e<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><blockquote><p>首先从Scheduler.scheduleJob（JobDetail jobDetail，Trigger trigger）调度job， 实际上就是将job存储到RAM中的jobsByGroup，
jobsByKey对应的Map中，将触发器存储到触发器（List），triggersByKey，triggersByGroup对应的Map中，及timeTriggers的Treeset中</p> <p>Scheduler.unscheduleJob（TriggerKey triggerKey）就是将triggerKey从triggersByKey，triggersByGroup，triggers，timeTriggers中移除;</p> <p>Scheduler.deleteJob（JobKey jobKey）除了从容器触发中的TriggerWrapper的JobKey为jobKey的列表<code>&lt;TriggerWrapper&gt;</code>，
并uncheduleJob（TriggerKey triggerKey）列表列表<code>&lt;TriggerWrapper&gt;</code>中的所有TriggerWrapper，同时从jobsByKey，jobsByGroup 的移除对应jobKey的相关信息</p></blockquote> <h2 id="quartz的misfire处理规则"><a href="#quartz的misfire处理规则" class="header-anchor">#</a> Quartz的Misfire处理规则</h2> <div class="language- extra-class"><pre class="language-text"><code>调度(scheduleJob)或恢复调度(resumeTrigger,resumeJob)后不同的misfire对应的处理规则

CronTrigger 

withMisfireHandlingInstructionDoNothing
——不触发立即执行
——等待下次Cron触发频率到达时刻开始按照Cron频率依次执行

withMisfireHandlingInstructionIgnoreMisfires
——以错过的第一个频率时间立刻开始执行
——重做错过的所有频率周期后
——当下一次触发频率发生时间大于当前时间后，再按照正常的Cron频率依次执行

withMisfireHandlingInstructionFireAndProceed
——以当前时间为触发频率立刻触发一次执行
——然后按照Cron频率依次执行


SimpleTrigger 

withMisfireHandlingInstructionFireNow
——以当前时间为触发频率立即触发执行
——执行至FinalTIme的剩余周期次数
——以调度或恢复调度的时刻为基准的周期频率，FinalTime根据剩余次数和当前时间计算得到
——调整后的FinalTime会略大于根据starttime计算的到的FinalTime值

withMisfireHandlingInstructionIgnoreMisfires
——以错过的第一个频率时间立刻开始执行
——重做错过的所有频率周期
——当下一次触发频率发生时间大于当前时间以后，按照Interval的依次执行剩下的频率
——共执行RepeatCount+1次

withMisfireHandlingInstructionNextWithExistingCount
——不触发立即执行
——等待下次触发频率周期时刻，执行至FinalTime的剩余周期次数
——以startTime为基准计算周期频率，并得到FinalTime
——即使中间出现pause，resume以后保持FinalTime时间不变


withMisfireHandlingInstructionNowWithExistingCount
——以当前时间为触发频率立即触发执行
——执行至FinalTIme的剩余周期次数
——以调度或恢复调度的时刻为基准的周期频率，FinalTime根据剩余次数和当前时间计算得到
——调整后的FinalTime会略大于根据starttime计算的到的FinalTime值

withMisfireHandlingInstructionNextWithRemainingCount
——不触发立即执行
——等待下次触发频率周期时刻，执行至FinalTime的剩余周期次数
——以startTime为基准计算周期频率，并得到FinalTime
——即使中间出现pause，resume以后保持FinalTime时间不变

withMisfireHandlingInstructionNowWithRemainingCount
——以当前时间为触发频率立即触发执行
——执行至FinalTIme的剩余周期次数
——以调度或恢复调度的时刻为基准的周期频率，FinalTime根据剩余次数和当前时间计算得到
——调整后的FinalTime会略大于根据starttime计算的到的FinalTime值

MISFIRE_INSTRUCTION_RESCHEDULE_NOW_WITH_REMAINING_REPEAT_COUNT
——此指令导致trigger忘记原始设置的starttime和repeat-count
——触发器的repeat-count将被设置为剩余的次数
——这样会导致后面无法获得原始设定的starttime和repeat-count值
</code></pre></div><h2 id="quartzapi"><a href="#quartzapi" class="header-anchor">#</a> QuartzAPI</h2> <blockquote><p>参考：https://blog.csdn.net/QXC1281/article/details/68924140</p></blockquote> <p><strong>核心接口有</strong></p> <ul><li>Scheduler – (调度器)与scheduler交互的主要API；</li> <li>Job – (作业)你通过scheduler执行任务，你的任务类需要实现的接口；</li> <li>JobDetail – (作业实例)定义Job的实例；</li> <li>Trigger – (触发器)触发Job的执行；</li> <li>JobBuilder – 定义和创建JobDetail实例的接口;</li> <li>TriggerBuilder – 定义和创建Trigger实例的接口；</li></ul> <h3 id="触发器接口基本介绍"><a href="#触发器接口基本介绍" class="header-anchor">#</a> 触发器接口基本介绍</h3> <p><strong>Trigger触发器方法介绍</strong></p> <div class="language- extra-class"><pre class="language-text"><code>// 触发器状态  
TriggerState  
    |-public enum TriggerState { NONE, NORMAL, PAUSED, COMPLETE, ERROR, BLOCKED }  
        |-NONE 无  
        |-NORMAL 正常状态  
        |-PAUSED 暂停状态   
        |-COMPLETE 完成  
        |-ERROR 错误  
        |-BLOCKED 堵塞   

// 执行完成时状态  
CompletedExecutionInstruction
    |-    public enum CompletedExecutionInstruction { 
            NOOP, RE_EXECUTE_JOB, SET_TRIGGER_COMPLETE, DELETE_TRIGGER, 
            SET_ALL_JOB_TRIGGERS_COMPLETE, SET_TRIGGER_ERROR, SET_ALL_JOB_TRIGGERS_ERROR }   
        |-NOOP 无   
        |-RE_EXECUTE_JOB 重复执行   
        |-SET_TRIGGER_COMPLETE 触发器执行完成  
        |-DELETE_TRIGGER 删除触发器  
        |-SET_ALL_JOB_TRIGGERS_COMPLETE 所有作业和触发器执行完成    
        |-SET_TRIGGER_ERROR 触发器执行错误  
        |-SET_ALL_JOB_TRIGGERS_ERROR 设置所有都是错误的  


TriggerTimeComparator  
getKey 获取触发器key值   
getJobKey  获取作业key 
getDescription 获取面熟  
getCalendarName 获取日历名称  
getJobDataMap 获取作业数据map  
getPriority 获取优先级  
mayFireAgain 是否重复执行  
getStartTime 开始时间  
getEndTime 结束时间  
getNextFireTime 下一次执行时间  
getPreviousFireTime 上一执行时间  
getFireTimeAfter(Date afterTime) 获取某个时间后的运行时间     
getFinalFireTime 获取最后执行时间  
getMisfireInstruction 获取失败策略  
getTriggerBuilder 获取触发器建造者    
getScheduleBuilder 获取调度类建造者 
equals   
compareTo    

// 失败策略   
MISFIRE_INSTRUCTION_SMART_POLICY   
MISFIRE_INSTRUCTION_IGNORE_MISFIRE_POLICY   
DEFAULT_PRIORITY
</code></pre></div><h3 id="触发器实现类"><a href="#触发器实现类" class="header-anchor">#</a> 触发器实现类</h3> <div class="language- extra-class"><pre class="language-text"><code>Trigger (org.quartz)    
    |-CalendarIntervalTrigger (org.quartz) 日期触发器   
    |   |-CalendarIntervalTriggerImpl (org.quartz.impl.triggers)   
    |-MutableTrigger (org.quartz.spi)   
    |   |-OperableTrigger (org.quartz.spi)    
    |       |-AbstractTrigger (org.quartz.impl.triggers)    
    |           |-CalendarIntervalTriggerImpl (org.quartz.impl.triggers)   
    |           |-SimpleTriggerImpl (org.quartz.impl.triggers)   
    |           |-DailyTimeIntervalTriggerImpl (org.quartz.impl.triggers)   
    |           |-CronTriggerImpl (org.quartz.impl.triggers)
    |-SimpleTrigger (org.quartz) 简单触发器  
    |   |-SimpleTriggerImpl (org.quartz.impl.triggers)  
    |-CoreTrigger (org.quartz.impl.triggers)  
    |   |-CalendarIntervalTriggerImpl (org.quartz.impl.triggers)   
    |   |-SimpleTriggerImpl (org.quartz.impl.triggers)   
    |   |-DailyTimeIntervalTriggerImpl (org.quartz.impl.triggers)  
    |   |-CronTriggerImpl (org.quartz.impl.triggers)
    |-CronTrigger (org.quartz) cron表达式   
    |   |-CronTriggerImpl (org.quartz.impl.triggers)  
    |-DailyTimeIntervalTrigger (org.quartz)日期触发类(日)    
        |-DailyTimeIntervalTriggerImpl (org.quartz.impl.triggers)
</code></pre></div><ul><li>常用</li></ul> <ol><li>SimpleTrigger :简单触发器</li> <li>CalendarIntervalTrigger:日历触发器</li> <li>CronTrigger:Cron表达式触发器</li> <li>DailyTimeIntervalTrigger:日期触发器</li></ol> <h3 id="调度器建造者"><a href="#调度器建造者" class="header-anchor">#</a> 调度器建造者</h3> <div class="language- extra-class"><pre class="language-text"><code>// 用于创建各个调度器  
ScheduleBuilder (org.quartz)   
    |-CalendarIntervalScheduleBuilder (org.quartz)    
    |-DailyTimeIntervalScheduleBuilder (org.quartz)   
    |-SimpleScheduleBuilder (org.quartz)       
    |-CronScheduleBuilder (org.quartz)
</code></pre></div><h3 id="触发器建造者"><a href="#触发器建造者" class="header-anchor">#</a> 触发器建造者</h3> <p><strong>简单触发器器源码分析,利用了建造者模式</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">TriggerBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 构造函数私有  
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Trigger</span><span class="token punctuation">&gt;</span></span> <span class="token function">newTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  创建一个建造者
<span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 创建触发器  
<span class="token comment">// 根据name和默认的group(即&quot;DEFAULT_GROUP&quot;)创建trigger的key</span>
<span class="token keyword">public</span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> 
<span class="token keyword">public</span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">String</span> group<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token class-name">TriggerKey</span> triggerKey<span class="token punctuation">)</span>


<span class="token keyword">public</span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">withDescription</span><span class="token punctuation">(</span><span class="token class-name">String</span> triggerDescription<span class="token punctuation">)</span> 描述  
<span class="token keyword">public</span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">withPriority</span><span class="token punctuation">(</span><span class="token keyword">int</span> triggerPriority<span class="token punctuation">)</span> 优先级
<span class="token keyword">public</span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">modifiedByCalendar</span><span class="token punctuation">(</span><span class="token class-name">String</span> calName<span class="token punctuation">)</span> 日期
<span class="token keyword">public</span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">startAt</span><span class="token punctuation">(</span><span class="token class-name">Date</span> triggerStartTime<span class="token punctuation">)</span> 开始时间
<span class="token keyword">public</span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">startNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 立即执行
<span class="token keyword">public</span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">endAt</span><span class="token punctuation">(</span><span class="token class-name">Date</span> triggerEndTime<span class="token punctuation">)</span> 结束时间
<span class="token keyword">public</span> <span class="token generics"><span class="token punctuation">&lt;</span>SBT <span class="token keyword">extends</span> <span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span>SBT<span class="token punctuation">&gt;</span></span> <span class="token function">withSchedule</span><span class="token punctuation">(</span><span class="token class-name">ScheduleBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span>SBT<span class="token punctuation">&gt;</span></span> schedBuilder<span class="token punctuation">)</span> 调度器
<span class="token keyword">public</span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">forJob</span><span class="token punctuation">(</span><span class="token class-name">JobKey</span> keyOfJobToFire<span class="token punctuation">)</span> 设置作业
<span class="token keyword">public</span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">forJob</span><span class="token punctuation">(</span><span class="token class-name">String</span> jobName<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">forJob</span><span class="token punctuation">(</span><span class="token class-name">String</span> jobName<span class="token punctuation">,</span> <span class="token class-name">String</span> jobGroup<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">TriggerBuilder</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">T</span><span class="token punctuation">&gt;</span></span> <span class="token function">forJob</span><span class="token punctuation">(</span><span class="token class-name">JobDetail</span> jobDetail<span class="token punctuation">)</span>
<span class="token function">usingJobData</span><span class="token punctuation">(</span><span class="token operator">--</span><span class="token operator">--</span><span class="token punctuation">,</span><span class="token operator">--</span><span class="token operator">--</span><span class="token punctuation">)</span> 设置作业内容


key
description
startTime
endTime
priority <span class="token class-name">Trigger</span><span class="token punctuation">.</span>DEFAULT_PRIORITY 
calendarName
jobKey
jobDataMap
scheduleBuilder
</code></pre></div><h3 id="simpletrigger简单触发器"><a href="#simpletrigger简单触发器" class="header-anchor">#</a> SimpleTrigger简单触发器</h3> <p><strong>简单调度器建造者</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">//构造函数私有化</span>
<span class="token keyword">protected</span> <span class="token class-name">SimpleScheduleBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token comment">//获取简单调度器</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">simpleSchedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">/***********************/</span>
<span class="token comment">// 1分钟执行(一直执行)   </span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">repeatMinutelyForever</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token comment">//每隔几分钟执行(一直执行)   </span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">repeatMinutelyForever</span><span class="token punctuation">(</span><span class="token keyword">int</span> minutes<span class="token punctuation">)</span> 
<span class="token comment">// 1秒执行(一直执行)      </span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">repeatSecondlyForever</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token comment">//每隔几秒钟执行(一直执行)   </span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">repeatSecondlyForever</span><span class="token punctuation">(</span><span class="token keyword">int</span> seconds<span class="token punctuation">)</span> 
<span class="token comment">// 1小时执行(一直执行)   </span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">repeatHourlyForever</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token comment">//每隔几小时钟执行(一直执行) </span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">repeatHourlyForever</span><span class="token punctuation">(</span><span class="token keyword">int</span> hours<span class="token punctuation">)</span>   
<span class="token comment">/***********************/</span>
<span class="token comment">//间隔时间为1分钟，总的执行次数为count</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">repeatMinutelyForTotalCount</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">)</span>  
<span class="token comment">//间隔时间为几分钟，总的执行次数为count   .............</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">repeatMinutelyForTotalCount</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token keyword">int</span> minutes<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">repeatSecondlyForTotalCount</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">repeatSecondlyForTotalCount</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token keyword">int</span> seconds<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">repeatHourlyForTotalCount</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">repeatHourlyForTotalCount</span><span class="token punctuation">(</span><span class="token keyword">int</span> count<span class="token punctuation">,</span> <span class="token keyword">int</span> hours<span class="token punctuation">)</span>
<span class="token comment">/***********************/</span>
<span class="token keyword">public</span> <span class="token class-name">MutableTrigger</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 创建一个<span class="token class-name">Trigger</span>
<span class="token comment">/***********************/</span>
<span class="token comment">// 几秒钟重复执行   </span>
<span class="token keyword">public</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">withIntervalInMilliseconds</span><span class="token punctuation">(</span><span class="token keyword">long</span> intervalInMillis<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">withIntervalInSeconds</span><span class="token punctuation">(</span><span class="token keyword">int</span> intervalInSeconds<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">withIntervalInMinutes</span><span class="token punctuation">(</span><span class="token keyword">int</span> intervalInMinutes<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">withIntervalInHours</span><span class="token punctuation">(</span><span class="token keyword">int</span> intervalInHours<span class="token punctuation">)</span>
<span class="token comment">/***********************/</span>
 <span class="token comment">// 重复执行册数  </span>
<span class="token keyword">public</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">withRepeatCount</span><span class="token punctuation">(</span><span class="token keyword">int</span> triggerRepeatCount<span class="token punctuation">)</span>
<span class="token comment">/***********************/</span>
参考地址  
http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>blog<span class="token punctuation">.</span>sina<span class="token punctuation">.</span>com<span class="token punctuation">.</span>cn<span class="token operator">/</span>s<span class="token operator">/</span>blog_56d8ea900101eu45<span class="token punctuation">.</span>html

<span class="token comment">//以错过的第一个频率时间立刻开始执行</span>
<span class="token comment">//重做错过的所有频率周期后</span>
<span class="token comment">//当下一次触发频率发生时间大于当前时间后，再按照正常的Cron频率依次执行</span>
<span class="token keyword">public</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">withMisfireHandlingInstructionIgnoreMisfires</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//以当前时间为触发频率立即触发执行</span>
<span class="token comment">//执行至FinalTIme的剩余周期次数</span>
<span class="token comment">//以调度或恢复调度的时刻为基准的周期频率，FinalTime根据剩余次数和当前时间计算得到</span>
<span class="token comment">//调整后的FinalTime会略大于根据starttime计算的到的FinalTime值</span>
<span class="token keyword">public</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">withMisfireHandlingInstructionFireNow</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//不触发立即执行</span>
<span class="token comment">//等待下次触发频率周期时刻，执行至FinalTime的剩余周期次数</span>
<span class="token comment">//以startTime为基准计算周期频率，并得到FinalTime</span>
<span class="token comment">//即使中间出现pause，resume以后保持FinalTime时间不变</span>
<span class="token keyword">public</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">withMisfireHandlingInstructionNextWithExistingCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//不触发立即执行</span>
<span class="token comment">//等待下次触发频率周期时刻，执行至FinalTime的剩余周期次数</span>
<span class="token comment">//以startTime为基准计算周期频率，并得到FinalTime</span>
<span class="token comment">//即使中间出现pause，resume以后保持FinalTime时间不变</span>
<span class="token keyword">public</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">withMisfireHandlingInstructionNextWithRemainingCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//以当前时间为触发频率立即触发执行</span>
<span class="token comment">//执行至FinalTIme的剩余周期次数</span>
<span class="token comment">//以调度或恢复调度的时刻为基准的周期频率，FinalTime根据剩余次数和当前时间计算得到</span>
<span class="token comment">//调整后的FinalTime会略大于根据starttime计算的到的FinalTime值</span>
<span class="token keyword">public</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">withMisfireHandlingInstructionNowWithExistingCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">//以当前时间为触发频率立即触发执行</span>
<span class="token comment">//执行至FinalTIme的剩余周期次数</span>
<span class="token comment">//以调度或恢复调度的时刻为基准的周期频率，FinalTime根据剩余次数和当前时间计算得到</span>
<span class="token keyword">public</span> <span class="token class-name">SimpleScheduleBuilder</span> <span class="token function">withMisfireHandlingInstructionNowWithRemainingCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


interval 时间间隔
repeatCount 重复时间
misfireInstruction
</code></pre></div><p><strong>SimpleTrigger</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimpleTriggerMain</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SchedulerException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 获取一个调度工厂</span>
        <span class="token class-name">SchedulerFactory</span> schedFact <span class="token operator">=</span> <span class="token keyword">new</span> org<span class="token punctuation">.</span>quartz<span class="token punctuation">.</span>impl<span class="token punctuation">.</span><span class="token class-name">StdSchedulerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取一个调度器</span>
        <span class="token class-name">Scheduler</span> sched <span class="token operator">=</span> schedFact<span class="token punctuation">.</span><span class="token function">getScheduler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">SimpleDateFormat</span> sdf <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd hh:mm:ss&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JobDetail</span> job <span class="token operator">=</span> <span class="token class-name">JobBuilder</span><span class="token punctuation">.</span><span class="token function">newJob</span><span class="token punctuation">(</span><span class="token class-name">HelloJob</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">&quot;job1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;group1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 在当前时间15秒后运行</span>
        <span class="token class-name">Date</span> startTime <span class="token operator">=</span> <span class="token class-name">DateBuilder</span><span class="token punctuation">.</span><span class="token function">nextGivenSecondDate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span> <span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 创建一个SimpleTrigger实例，指定该Trigger在Scheduler中所属组及名称。</span>
        <span class="token comment">// 接着设置调度的时间规则.当前时间15秒后运行，每10秒运行一次，共运行5次</span>
        <span class="token class-name">SimpleTrigger</span> trigger <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">SimpleTrigger</span><span class="token punctuation">)</span> <span class="token class-name">TriggerBuilder</span><span class="token punctuation">.</span><span class="token function">newTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">&quot;trigger1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;group1&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">startAt</span><span class="token punctuation">(</span>startTime<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withSchedule</span><span class="token punctuation">(</span><span class="token class-name">SimpleScheduleBuilder</span><span class="token punctuation">.</span><span class="token function">simpleSchedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">withIntervalInSeconds</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
                        <span class="token punctuation">.</span><span class="token function">withRepeatCount</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sched<span class="token punctuation">.</span><span class="token function">scheduleJob</span><span class="token punctuation">(</span>job<span class="token punctuation">,</span> trigger<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 调度启动</span>
        sched<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="crontriger-cron触发器"><a href="#crontriger-cron触发器" class="header-anchor">#</a> CronTriger-Cron触发器</h3> <p><strong>Cron调度器建造者</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 构造函数私有化</span>
<span class="token keyword">protected</span> <span class="token class-name">CronScheduleBuilder</span><span class="token punctuation">(</span><span class="token class-name">CronExpression</span> cronExpression<span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">MutableTrigger</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 根据cron表达式建造</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">CronScheduleBuilder</span> <span class="token function">cronSchedule</span><span class="token punctuation">(</span><span class="token class-name">String</span> cronExpression<span class="token punctuation">)</span>
<span class="token comment">// 核查表达式是否正确</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">CronScheduleBuilder</span> <span class="token function">cronScheduleNonvalidatedExpression</span><span class="token punctuation">(</span>
            <span class="token class-name">String</span> cronExpression<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">ParseException</span>
<span class="token comment">//表达式异常</span>
cronScheduleNoParseException
<span class="token comment">// 利用CronExpression建造</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">CronScheduleBuilder</span> <span class="token function">cronSchedule</span><span class="token punctuation">(</span><span class="token class-name">CronExpression</span> cronExpression<span class="token punctuation">)</span>
<span class="token comment">//每天在指定的时间执行，根据这个调度创建一个cron表达式</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">CronScheduleBuilder</span> <span class="token function">dailyAtHourAndMinute</span><span class="token punctuation">(</span><span class="token keyword">int</span> hour<span class="token punctuation">,</span> <span class="token keyword">int</span> minute<span class="token punctuation">)</span>

<span class="token comment">// 通过`分钟`、`小时`、`周`创建一个CronScheduleBuilder实例，即在某一天的给定时刻</span>
<span class="token comment">// (通过`分钟`、`小时`指定)执行，，而天数由`周`确定，如果“周二、周四的10:05“等；</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">CronScheduleBuilder</span> <span class="token function">atHourAndMinuteOnGivenDaysOfWeek</span><span class="token punctuation">(</span>
            <span class="token keyword">int</span> hour<span class="token punctuation">,</span> <span class="token keyword">int</span> minute<span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> daysOfWeek<span class="token punctuation">)</span>
<span class="token comment">//调度计划：每周的某一天，在指定的时间（小时和分钟）执行</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">CronScheduleBuilder</span> <span class="token function">weeklyOnDayAndHourAndMinute</span><span class="token punctuation">(</span>
            <span class="token keyword">int</span> dayOfWeek<span class="token punctuation">,</span> <span class="token keyword">int</span> hour<span class="token punctuation">,</span> <span class="token keyword">int</span> minute<span class="token punctuation">)</span>
<span class="token comment">//调度计划：每月的某一天，在指定的时间（小时和分钟）执行</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">CronScheduleBuilder</span> <span class="token function">monthlyOnDayAndHourAndMinute</span><span class="token punctuation">(</span>
            <span class="token keyword">int</span> dayOfMonth<span class="token punctuation">,</span> <span class="token keyword">int</span> hour<span class="token punctuation">,</span> <span class="token keyword">int</span> minute<span class="token punctuation">)</span>

<span class="token comment">//设置时区</span>
<span class="token keyword">public</span> <span class="token class-name">CronScheduleBuilder</span> <span class="token function">inTimeZone</span><span class="token punctuation">(</span><span class="token class-name">TimeZone</span> timezone<span class="token punctuation">)</span>
<span class="token comment">// 设置处理办法</span>
<span class="token keyword">public</span> <span class="token class-name">CronScheduleBuilder</span> <span class="token function">withMisfireHandlingInstructionIgnoreMisfires</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 

<span class="token keyword">public</span> <span class="token class-name">CronScheduleBuilder</span> <span class="token function">withMisfireHandlingInstructionDoNothing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">public</span> <span class="token class-name">CronScheduleBuilder</span> <span class="token function">withMisfireHandlingInstructionFireAndProceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

cronExpression
misfireInstruction
</code></pre></div><p><strong>Cron应用</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CronTriggerMain</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SchedulerException</span> <span class="token punctuation">{</span>
        <span class="token class-name">SchedulerFactory</span> schedFact <span class="token operator">=</span> <span class="token keyword">new</span> org<span class="token punctuation">.</span>quartz<span class="token punctuation">.</span>impl<span class="token punctuation">.</span><span class="token class-name">StdSchedulerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取一个调度器</span>
        <span class="token class-name">Scheduler</span> sched <span class="token operator">=</span> schedFact<span class="token punctuation">.</span><span class="token function">getScheduler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">JobDetail</span> job <span class="token operator">=</span> <span class="token class-name">JobBuilder</span><span class="token punctuation">.</span><span class="token function">newJob</span><span class="token punctuation">(</span><span class="token class-name">HelloJob</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">&quot;job1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;group1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 每两秒执行</span>
        <span class="token class-name">CronTrigger</span> trigger <span class="token operator">=</span> <span class="token class-name">TriggerBuilder</span><span class="token punctuation">.</span><span class="token function">newTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">&quot;trigger1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;group1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withSchedule</span><span class="token punctuation">(</span>
                <span class="token class-name">CronScheduleBuilder</span><span class="token punctuation">.</span><span class="token function">cronSchedule</span><span class="token punctuation">(</span><span class="token string">&quot;/2 * * * * ?&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sched<span class="token punctuation">.</span><span class="token function">scheduleJob</span><span class="token punctuation">(</span>job<span class="token punctuation">,</span> trigger<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 调度启动</span>
        sched<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="dailytimeintervaltrigger-日期触发"><a href="#dailytimeintervaltrigger-日期触发" class="header-anchor">#</a> DailyTimeIntervalTrigger-日期触发</h3> <p><strong>DailyTime调度器建造者</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// 建造者模式 </span>
<span class="token class-name">DailyTimeIntervalScheduleBuilder</span> 
dailyTimeIntervalSchedule 
build

<span class="token comment">//执行时间间隔触发执行,unit时间单位 </span>
<span class="token keyword">public</span> <span class="token class-name">DailyTimeIntervalScheduleBuilder</span> <span class="token function">withInterval</span><span class="token punctuation">(</span><span class="token keyword">int</span> timeInterval<span class="token punctuation">,</span> <span class="token class-name">IntervalUnit</span> unit<span class="token punctuation">)</span> 
<span class="token comment">//秒 </span>
withIntervalInSeconds 
<span class="token comment">//分钟 </span>
withIntervalInMinutes 
<span class="token comment">//小时 </span>
withIntervalInHours 
<span class="token comment">// 周几执行 </span>
<span class="token keyword">public</span> <span class="token class-name">DailyTimeIntervalScheduleBuilder</span> <span class="token function">onDaysOfTheWeek</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> … onDaysOfWeek<span class="token punctuation">)</span> 
onDaysOfTheWeek 
onMondayThroughFriday 
onSaturdayAndSunday 
onEveryDay 
<span class="token comment">// 开始触发时间 </span>
startingDailyAt 
<span class="token comment">//结束时间 </span>
endingDailyAt 
<span class="token comment">//支持次数 </span>
endingDailyAfterCount 
withMisfireHandlingInstructionIgnoreMisfires 
withMisfireHandlingInstructionDoNothing 
withMisfireHandlingInstructionFireAndProceed 
<span class="token comment">//重复次数 </span>
withRepeatCount 
validateInterval

<span class="token comment">// 常量等 </span>
interval 
intervalUnit 
daysOfWeek 
startTimeOfDay 
endTimeOfDay 
repeatCount 
misfireInstruction 
ALL_DAYS_OF_THE_WEEK 
MONDAY_THROUGH_FRIDAY 
SATURDAY_AND_SUNDAY
</code></pre></div><p><strong>应用</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DailyTimeIntervalTriggerMain</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SchedulerException</span> <span class="token punctuation">{</span>
        <span class="token class-name">SchedulerFactory</span> schedFact <span class="token operator">=</span> <span class="token keyword">new</span> org<span class="token punctuation">.</span>quartz<span class="token punctuation">.</span>impl<span class="token punctuation">.</span><span class="token class-name">StdSchedulerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取一个调度器</span>
        <span class="token class-name">Scheduler</span> sched <span class="token operator">=</span> schedFact<span class="token punctuation">.</span><span class="token function">getScheduler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">JobDetail</span> job <span class="token operator">=</span> <span class="token class-name">JobBuilder</span><span class="token punctuation">.</span><span class="token function">newJob</span><span class="token punctuation">(</span><span class="token class-name">HelloJob</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">&quot;job1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;group1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 每两秒执行</span>
        <span class="token class-name">DailyTimeIntervalTrigger</span> trigger <span class="token operator">=</span> <span class="token class-name">TriggerBuilder</span><span class="token punctuation">.</span><span class="token function">newTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">&quot;trigger1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;group1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withSchedule</span><span class="token punctuation">(</span>
                <span class="token class-name">DailyTimeIntervalScheduleBuilder</span><span class="token punctuation">.</span><span class="token function">dailyTimeIntervalSchedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withInterval</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">DateBuilder</span><span class="token punctuation">.</span><span class="token class-name">IntervalUnit</span><span class="token punctuation">.</span>SECOND<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sched<span class="token punctuation">.</span><span class="token function">scheduleJob</span><span class="token punctuation">(</span>job<span class="token punctuation">,</span> trigger<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 调度启动</span>
        sched<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="calendarintervaltrigger-日历触发"><a href="#calendarintervaltrigger-日历触发" class="header-anchor">#</a> CalendarIntervalTrigger-日历触发</h3> <p><strong>Calendar调度器建造者</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">CalendarIntervalScheduleBuilder</span>
calendarIntervalSchedule
build
<span class="token comment">// 和DailyTimeIntervalScheduleBuilder差不多</span>
<span class="token keyword">public</span> <span class="token class-name">CalendarIntervalScheduleBuilder</span> <span class="token function">withInterval</span><span class="token punctuation">(</span><span class="token keyword">int</span> timeInterval<span class="token punctuation">,</span> <span class="token class-name">IntervalUnit</span> unit<span class="token punctuation">)</span>
withIntervalInSeconds
withIntervalInMinutes
withIntervalInHours
withIntervalInDays
withIntervalInWeeks
withIntervalInMonths
withIntervalInYears

withMisfireHandlingInstructionIgnoreMisfires
withMisfireHandlingInstructionDoNothing
withMisfireHandlingInstructionFireAndProceed
inTimeZone

preserveHourOfDayAcrossDaylightSavings
skipDayIfHourDoesNotExist
validateInterval
interval
intervalUnit
misfireInstruction
timeZone
preserveHourOfDayAcrossDaylightSavings
skipDayIfHourDoesNotExist
</code></pre></div><p><strong>应用</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">CalendarIntervalMain</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">SchedulerException</span> <span class="token punctuation">{</span>
        <span class="token class-name">SchedulerFactory</span> schedFact <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StdSchedulerFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 获取一个调度器</span>
        <span class="token class-name">Scheduler</span> sched <span class="token operator">=</span> schedFact<span class="token punctuation">.</span><span class="token function">getScheduler</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">JobDetail</span> job <span class="token operator">=</span> <span class="token class-name">JobBuilder</span><span class="token punctuation">.</span><span class="token function">newJob</span><span class="token punctuation">(</span><span class="token class-name">HelloJob</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">&quot;job1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;group1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 每两秒执行</span>
        <span class="token class-name">CalendarIntervalTrigger</span> trigger <span class="token operator">=</span> <span class="token class-name">TriggerBuilder</span><span class="token punctuation">.</span><span class="token function">newTrigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withIdentity</span><span class="token punctuation">(</span><span class="token string">&quot;trigger1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;group1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withSchedule</span><span class="token punctuation">(</span>
                <span class="token class-name">CalendarIntervalScheduleBuilder</span><span class="token punctuation">.</span><span class="token function">calendarIntervalSchedule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withInterval</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token class-name">DateBuilder</span><span class="token punctuation">.</span><span class="token class-name">IntervalUnit</span><span class="token punctuation">.</span>SECOND<span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        sched<span class="token punctuation">.</span><span class="token function">scheduleJob</span><span class="token punctuation">(</span>job<span class="token punctuation">,</span> trigger<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 调度启动</span>
        sched<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit" style="display:none;"><div class="edit-link"><a href="https://github.com/woytu/notes-vuepress/edit/master//Java/Quartz.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">2 分钟前</span></div></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><!----></div></div>
    <script src="/assets/js/app.9ddf54ff.js" defer></script><script src="/assets/js/4.7882e3c9.js" defer></script><script src="/assets/js/1.1cbc9434.js" defer></script><script src="/assets/js/34.af69343e.js" defer></script><script src="/assets/js/9.47cf28c1.js" defer></script>
  </body>
</html>
