(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{609:function(t,e,r){"use strict";r.r(e);var a=r(4),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"git服务"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#git服务"}},[t._v("#")]),t._v(" Git服务")]),t._v(" "),r("p"),r("div",{staticClass:"table-of-contents"},[r("ul",[r("li",[r("a",{attrs:{href:"#flag"}},[t._v("Flag")])]),r("li",[r("a",{attrs:{href:"#gitlab"}},[t._v("GitLab")])]),r("li",[r("a",{attrs:{href:"#github"}},[t._v("GitHub")]),r("ul",[r("li",[r("a",{attrs:{href:"#访问速度过慢"}},[t._v("访问速度过慢")])]),r("li",[r("a",{attrs:{href:"#actions"}},[t._v("Actions")])])])]),r("li",[r("a",{attrs:{href:"#gitwebhook"}},[t._v("GitWebHook")]),r("ul",[r("li",[r("a",{attrs:{href:"#配置接收通知"}},[t._v("配置接收通知")])]),r("li",[r("a",{attrs:{href:"#配置webhook"}},[t._v("配置WebHook")])])])])])]),r("p"),t._v(" "),r("h2",{attrs:{id:"flag"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#flag"}},[t._v("#")]),t._v(" Flag")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/jenkinsci",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/jenkinsci"),r("OutboundLink")],1),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://www.jenkins.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.jenkins.io"),r("OutboundLink")],1)])])]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/semantic-release",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/semantic-release"),r("OutboundLink")],1)])]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/gitblit/gitblit",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/gitblit/gitblit"),r("OutboundLink")],1)])]),t._v(" "),r("ul",[r("li",[t._v("GH存档 "),r("a",{attrs:{href:"https://www.gharchive.org",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.gharchive.org"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("GitHub每周趋势 "),r("a",{attrs:{href:"https://github.com/SolaTyolo/gold_github_trending",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/SolaTyolo/gold_github_trending"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("GitHub每天趋势 "),r("a",{attrs:{href:"https://github.com/yangwenmai/github-trending-backup",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/yangwenmai/github-trending-backup"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("记录GitHub趋势 "),r("a",{attrs:{href:"https://github.com/xiaobaiha/github-trending-history",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/xiaobaiha/github-trending-history"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("获取统计信息 "),r("a",{attrs:{href:"https://github.com/shroudedcode/devstats",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/shroudedcode/devstats"),r("OutboundLink")],1)])]),t._v(" "),r("p",[r("strong",[t._v("Gogs")])]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/gogs/gogs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/gogs/gogs"),r("OutboundLink")],1),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://gogs.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gogs.io"),r("OutboundLink")],1)])])]),t._v(" "),r("li",[r("a",{attrs:{href:"https://hub.docker.com/r/gogs/gogs",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hub.docker.com/r/gogs/gogs"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://www.jianshu.com/p/86c385682ac8",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装教程"),r("OutboundLink")],1)])]),t._v(" "),r("p",[r("strong",[t._v("Gitea")])]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/go-gitea/gitea",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/go-gitea/gitea"),r("OutboundLink")],1),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://gitea.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gitea.io"),r("OutboundLink")],1)])])]),t._v(" "),r("li",[r("a",{attrs:{href:"https://hub.docker.com/r/gitea/gitea",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hub.docker.com/r/gitea/gitea"),r("OutboundLink")],1)])]),t._v(" "),r("h2",{attrs:{id:"gitlab"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#gitlab"}},[t._v("#")]),t._v(" GitLab")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://gitlab.com/xhang/gitlab/wikis/home",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://gitlab.com/xhang/gitlab/wikis/home"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/twang2218/gitlab-ce-zh",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitLab Community Edition (中文社区版)"),r("OutboundLink")],1),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://hub.docker.com/r/twang2218/gitlab-ce-zh",target:"_blank",rel:"noopener noreferrer"}},[t._v("汉化的 GitLab 社区版 Docker Image"),r("OutboundLink")],1)])])]),t._v(" "),r("li",[r("a",{attrs:{href:"https://hub.docker.com/r/bensonfx/gitlab-ce-zh",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hub.docker.com/r/bensonfx/gitlab-ce-zh"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/bensonfx/codeserver",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/bensonfx/codeserver"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://hub.docker.com/r/benyoo/gitlab",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hub.docker.com/r/benyoo/gitlab"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://hub.docker.com/r/imleafz/gitlab-ce-zh",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://hub.docker.com/r/imleafz/gitlab-ce-zh"),r("OutboundLink")],1)])]),t._v(" "),r("div",{staticClass:"language-yml extra-class"},[r("pre",{pre:!0,attrs:{class:"language-yml"}},[r("code",[r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2'")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("gitlab")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'twang2218/gitlab-ce-zh:11.1.4'")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" unless"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("stopped\n      "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hostname")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'git.woetu.com'")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("TZ")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Asia/Shanghai'")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("GITLAB_OMNIBUS_CONFIG")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("|")]),r("span",{pre:!0,attrs:{class:"token scalar string"}},[t._v("\n          external_url 'http://git.woetu.com'\n          gitlab_rails['time_zone'] = 'Asia/Shanghai'\n          # 需要配置到 gitlab.rb 中的配置可以在这里配置，每个配置一行，注意缩进。\n          # 比如下面的电子邮件的配置：\n          # gitlab_rails['smtp_enable'] = true\n          # gitlab_rails['smtp_address'] = \"smtp.exmail.qq.com\"\n          # gitlab_rails['smtp_port'] = 465\n          # gitlab_rails['smtp_user_name'] = \"xxxx@xx.com\"\n          # gitlab_rails['smtp_password'] = \"password\"\n          # gitlab_rails['smtp_authentication'] = \"login\"\n          # gitlab_rails['smtp_enable_starttls_auto'] = true\n          # gitlab_rails['smtp_tls'] = true\n          # gitlab_rails['gitlab_email_from'] = 'xxxx@xx.com'")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'8099:80'")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'442:443'")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v("'22:22'")]),t._v("\n      "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - /home/gitlab/config:/home/gitlab/config")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - /home/gitlab/data:/home/gitlab/data")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - /home/gitlab/logs:/home/gitlab/logs")]),t._v("\n        "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" config"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/gitlab\n        "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" data"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/var/opt/gitlab\n        "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" logs"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/var/log/gitlab\n"),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("config")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("data")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),r("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("logs")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n")])])]),r("h2",{attrs:{id:"github"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#github"}},[t._v("#")]),t._v(" GitHub")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/github",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/github"),r("OutboundLink")],1)])]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/probot/probot",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/probot/probot"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://help.github.com/cn",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://help.github.com/cn"),r("OutboundLink")],1)]),t._v(" "),r("li",[t._v("发布成功之后"),r("code",[t._v("github pages")]),t._v("的"),r("code",[t._v("Custom domain")]),t._v("配置项就被清空："),r("a",{attrs:{href:"http://wiki.jikexueyuan.com/project/github-pages-basics/cname-file.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("github-pages-basics"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://codecov.io",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://codecov.io"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://p3terx.com/archives.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("目录 - P3TERX ZONE"),r("OutboundLink")],1)])]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/zenodo/zenodo",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/zenodo/zenodo"),r("OutboundLink")],1)])]),t._v(" "),r("h3",{attrs:{id:"访问速度过慢"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#访问速度过慢"}},[t._v("#")]),t._v(" 访问速度过慢")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://myssl.com/dns_check.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://myssl.com/dns_check.html"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"http://tool.chinaz.com/dns",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://tool.chinaz.com/dns"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://www.ipaddress.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.ipaddress.com"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"/files/%E8%AE%BE%E7%BD%AEGitHub%E7%9A%84Hosts.bat"}},[t._v("Windows设置GitHub的Hosts脚本")])])]),t._v(" "),r("p",[r("strong",[t._v("刷新DNS缓存")])]),t._v(" "),r("ul",[r("li",[t._v("macOS")])]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("killall")]),t._v(" -HUP mDNSResponder\ndscacheutil -flushcache\n")])])]),r("ul",[r("li",[t._v("Windows")])]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[t._v("ipconfig /flushdns\n")])])]),r("ul",[r("li",[t._v("Linux")])]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("service")]),t._v(" nscd restart\n")])])]),r("ul",[r("li",[t._v("Ubuntu")])]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" /etc/init.d/dns-clean start\n")])])]),r("p",[r("strong",[t._v("克隆代理地址")])]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/BaseMax/GitHubMirror",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/BaseMax/GitHubMirror"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/RC1844/FastGithub",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/RC1844/FastGithub"),r("OutboundLink")],1)])]),t._v(" "),r("ul",[r("li",[t._v("替换"),r("code",[t._v("github.com")]),t._v("为\n"),r("ul",[r("li",[r("code",[t._v("github.com.cnpmjs.org")])]),t._v(" "),r("li",[r("code",[t._v("jlytgs.com/github_")])]),t._v(" "),r("li",[r("code",[t._v("github.dyf62976.workers.dev")])]),t._v(" "),r("li",[r("code",[t._v("github.wuyanzheshui.workers.dev")])]),t._v(" "),r("li",[r("code",[t._v("github.hsmw.workers.dev")])]),t._v(" "),r("li",[r("code",[t._v("github.reycn.workers.dev")])]),t._v(" "),r("li",[r("code",[t._v("github.itzmx.com")])])])])]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://cdn.jsdelivr.net/gh",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://cdn.jsdelivr.net/gh"),r("OutboundLink")],1)])]),t._v(" "),r("h3",{attrs:{id:"actions"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#actions"}},[t._v("#")]),t._v(" Actions")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("GitHub Actions 入门教程"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://segmentfault.com/a/1190000020873860",target:"_blank",rel:"noopener noreferrer"}},[t._v("Github Actions 尝鲜"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://blog.lucien.ink/category/ci",target:"_blank",rel:"noopener noreferrer"}},[t._v("持续集成"),r("OutboundLink")],1)])]),t._v(" "),r("blockquote",[r("p",[t._v("生成公钥和私钥"),r("code",[t._v('ssh-keygen -t rsa -b 4096 -C "yourname@example.com" -f 文件名称 -N ""')]),t._v("（ACTION_DEPLOY_KEY），\n或者生成新的个人访问令牌（PERSONAL_TOKEN）"),r("a",{attrs:{href:"https://github.com/settings/tokens/new",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/settings/tokens/new"),r("OutboundLink")],1)])]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/marketplace?utf8=%E2%9C%93&type=actions&query=deploy-to-github-pages",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/marketplace?utf8=%E2%9C%93&type=actions&query=deploy-to-github-pages"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/actions"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/sdras/awesome-actions",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/sdras/awesome-actions"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/peaceiris/actions-gh-pages",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/peaceiris/actions-gh-pages"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/JamesIves/github-pages-deploy-action",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/JamesIves/github-pages-deploy-action"),r("OutboundLink")],1)])]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/marketplace?type=actions&query=upload+release",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/marketplace?type=actions&query=upload+release"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/wangyoucao577/go-release-action",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/wangyoucao577/go-release-action"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/elgohr/Publish-Docker-Github-Action",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/elgohr/Publish-Docker-Github-Action"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/release-drafter/release-drafter",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/release-drafter/release-drafter"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/xresloader/upload-to-github-release",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/xresloader/upload-to-github-release"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/svenstaro/upload-release-action",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/svenstaro/upload-release-action"),r("OutboundLink")],1)])]),t._v(" "),r("p",[r("strong",[t._v("第三方CI")])]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/semantic-release/semantic-release/blob/master/docs/usage/ci-configuration.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("CI services"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/opencpu",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/opencpu"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/circleci",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/circleci"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/codeship",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/codeship"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/gocd",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/gocd"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/travis-ci",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/travis-ci"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/wercker",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/wercker"),r("OutboundLink")],1)])]),t._v(" "),r("h2",{attrs:{id:"gitwebhook"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#gitwebhook"}},[t._v("#")]),t._v(" GitWebHook")]),t._v(" "),r("ul",[r("li",[t._v("手动部署")])]),t._v(" "),r("blockquote",[r("p",[t._v("Vue项目完成后,执行"),r("code",[t._v("npm run build")]),t._v(",然后将生成的dist目录下的文件放到web目录下")])]),t._v(" "),r("ul",[r("li",[t._v("WebHooks自动化部署,流程如下:")])]),t._v(" "),r("blockquote",[r("p",[t._v("配置"),r("code",[t._v("Gitea")]),t._v("的"),r("code",[t._v("WebHook")]),t._v("通知(也可以用"),r("code",[t._v("码云")]),t._v("、"),r("code",[t._v("Github")]),t._v("、"),r("code",[t._v("GitLab")]),t._v("、"),r("code",[t._v("gogs")]),t._v(",带"),r("code",[t._v("WebHook")]),t._v("功能就行)")])]),t._v(" "),r("blockquote",[r("p",[t._v("当我们"),r("code",[t._v("push")]),t._v("到仓库时,"),r("code",[t._v("Gitea")]),t._v("会主动发送一个通知到我们的服务器,然后服务器接到通知执行我们部署的脚本,开始自动化构建。")])]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://github.com/woytu/webhook-go",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/woytu/webhook-go"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/adnanh/webhook",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/adnanh/webhook"),r("OutboundLink")],1)]),t._v(" "),r("li",[r("a",{attrs:{href:"https://github.com/pre-commit",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/pre-commit"),r("OutboundLink")],1)])]),t._v(" "),r("h3",{attrs:{id:"配置接收通知"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置接收通知"}},[t._v("#")]),t._v(" 配置接收通知")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"/files/%E7%BC%96%E8%AF%91%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%88%B0%E6%8C%87%E5%AE%9A%E7%9B%AE%E5%BD%95.sh"}},[t._v("编译项目部署到指定目录.sh")])]),t._v(" "),r("li",[r("a",{attrs:{href:"/files/%E7%BC%96%E8%AF%91%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2%E5%88%B0GitHub.sh"}},[t._v("编译项目部署到GitHub.sh")])])]),t._v(" "),r("p",[r("strong",[t._v("必备环境")])]),t._v(" "),r("ul",[r("li",[t._v("以下命令视自己的环境而执行")])]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# git")]),t._v("\nyum "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# node 由于nodejs自带npm所以就不需要手动安装了")]),t._v("\nyum "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -y nodejs\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vue-cli")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" -g @vue/cli\n")])])]),r("h4",{attrs:{id:"宝塔面板"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#宝塔面板"}},[t._v("#")]),t._v(" 宝塔面板")]),t._v(" "),r("ul",[r("li",[t._v("设置宝塔WebHook插件")])]),t._v(" "),r("p",[r("img",{attrs:{src:"/images/%E5%AE%9D%E5%A1%94WebHook%E8%AE%BE%E7%BD%AE.png",alt:""}})]),t._v(" "),r("ul",[r("li",[r("p",[t._v("宝塔WebHook获取url")])]),t._v(" "),r("li",[r("p",[t._v("param参数需要和脚本里对应起来,我这里写的是pull")])])]),t._v(" "),r("blockquote",[r("p",[r("code",[t._v("http://服务器ip:8888/hook?access_key=5C84B7A5UeXYalfNL6WEpi3jdmmxhFlk3jpvEw02BMo84Ak3&param=pull")])])]),t._v(" "),r("p",[r("img",{attrs:{src:"/images/%E5%AE%9D%E5%A1%94WebHook%E8%8E%B7%E5%8F%96url.png",alt:""}})]),t._v(" "),r("h4",{attrs:{id:"netcat命令"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#netcat命令"}},[t._v("#")]),t._v(" netcat命令")]),t._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"https://segmentfault.com/a/1190000016626298",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://segmentfault.com/a/1190000016626298"),r("OutboundLink")],1)])]),t._v(" "),r("ul",[r("li",[r("p",[t._v("实现监听端口->响应请求->执行脚本部署")])]),t._v(" "),r("li",[r("p",[t._v("一直监听 9999 端口，有请求就响应"),r("code",[t._v("echo")]),t._v("的内容，并执行指定脚本")])])]),t._v(" "),r("div",{staticClass:"language-bash extra-class"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[r("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" -e "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HTTP/1.1 200 ok,glass'),r("span",{pre:!0,attrs:{class:"token entity",title:"\\r"}},[t._v("\\r")]),r("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("Connection: close"),r("span",{pre:!0,attrs:{class:"token entity",title:"\\r"}},[t._v("\\r")]),r("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),r("span",{pre:!0,attrs:{class:"token entity",title:"\\r"}},[t._v("\\r")]),t._v('"')]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("  "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("nc")]),t._v(" -l "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0 "),r("span",{pre:!0,attrs:{class:"token number"}},[t._v("9999")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("sh")]),t._v(" /home/update.sh "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /home/logs/webhook.log "),r("span",{pre:!0,attrs:{class:"token operator"}},[r("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v(">")]),r("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("&1")]),t._v("\n")])])]),r("blockquote",[r("p",[t._v("通过 systemd，可以将这个脚本管理起来，让它永远重启，这样一次部署之后，马上就可以重新监听，等待下一次部署命令。注意要添加 StartLimitInterval ，限制一下执行的频率。")])]),t._v(" "),r("ul",[r("li",[t._v("最终的"),r("code",[t._v("systemd service")]),t._v("如下")])]),t._v(" "),r("div",{staticClass:"language-conf extra-class"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[t._v("[Unit]\nDescription=Autopull through webhook\nAfter=network.target\n \n[Service]\nUser=admin\nType=simple\nExecStart=/bin/bash -xc 'echo -e \"HTTP/1.1 200 ok,glass\\r\\nConnection: close\\r\\n\\r\" |  nc -l 0.0.0.0 9999 ; sh /home/deploy/update.sh >> /home/logs/webhook.log 2>&1'\nRestart=always\nStartLimitInterval=1min\nStartLimitBurst=60\n \n[Install]\nWantedBy=multi-user.target\n")])])]),r("blockquote",[r("p",[t._v("这样就可以实现每次向 master push 代码，自动测试成功并且马上推送到测试环境中。 update.sh 脚本的最后可以加一个 Curl 命令向钉钉或者 slack 发送提醒。")])]),t._v(" "),r("h3",{attrs:{id:"配置webhook"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#配置webhook"}},[t._v("#")]),t._v(" 配置WebHook")]),t._v(" "),r("p",[r("img",{attrs:{src:"/images/GiteaWebHook%E8%AE%BE%E7%BD%AE.png",alt:""}})]),t._v(" "),r("h4",{attrs:{id:"添加接收通知url"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#添加接收通知url"}},[t._v("#")]),t._v(" 添加接收通知url")]),t._v(" "),r("p",[r("img",{attrs:{src:"/images/GiteaWebHook%E6%B7%BB%E5%8A%A0.png",alt:""}})]),t._v(" "),r("h4",{attrs:{id:"测试推送"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#测试推送"}},[t._v("#")]),t._v(" 测试推送")]),t._v(" "),r("p",[r("img",{attrs:{src:"/images/GiteaWebHook%E6%B5%8B%E8%AF%95.png",alt:""}})])])}),[],!1,null,null,null);e.default=s.exports}}]);