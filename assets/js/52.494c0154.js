(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{639:function(s,a,t){"use strict";t.r(a);var e=t(4),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"mysql安装配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#mysql安装配置"}},[s._v("#")]),s._v(" MySQL安装配置")]),s._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#flag"}},[s._v("Flag")])]),t("li",[t("a",{attrs:{href:"#windows版安装"}},[s._v("Windows版安装")])]),t("li",[t("a",{attrs:{href:"#centos安装"}},[s._v("CentOS安装")]),t("ul",[t("li",[t("a",{attrs:{href:"#yum安装"}},[s._v("yum安装")])]),t("li",[t("a",{attrs:{href:"#编译安装"}},[s._v("编译安装")])])])]),t("li",[t("a",{attrs:{href:"#配置"}},[s._v("配置")]),t("ul",[t("li",[t("a",{attrs:{href:"#yum安装配置"}},[s._v("yum安装配置")])]),t("li",[t("a",{attrs:{href:"#宝塔面板安装配置"}},[s._v("宝塔面板安装配置")])])])])])]),t("p"),s._v(" "),t("h2",{attrs:{id:"flag"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#flag"}},[s._v("#")]),s._v(" Flag")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/mysql",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://github.com/mysql"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://dev.mysql.com/downloads/mysql",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://dev.mysql.com/downloads/mysql"),t("OutboundLink")],1)])]),s._v(" "),t("h2",{attrs:{id:"windows版安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#windows版安装"}},[s._v("#")]),s._v(" Windows版安装")]),s._v(" "),t("blockquote",[t("p",[s._v("这里是介绍免安装版的Mysql")])]),s._v(" "),t("ol",[t("li",[s._v("安装服务："),t("code",[s._v("mysqld --install")]),s._v(" 如果执行错误需要安装C++运行库")]),s._v(" "),t("li",[s._v("初始化："),t("code",[s._v("mysqld --initialize --console")]),s._v(" 会产生一个随机密码\n"),t("ul",[t("li",[t("code",[s._v("mysqld –initialize-insecure")]),s._v(" 初始化数据库，并设置默认root密码为空")]),s._v(" "),t("li",[t("code",[s._v('mysqladmin -u root password 密码";')]),s._v(" 创建root用户的密码")])])]),s._v(" "),t("li",[s._v("开启服务："),t("code",[s._v("net start mysql")])]),s._v(" "),t("li",[s._v("关闭服务："),t("code",[s._v("net stop mysql")])]),s._v(" "),t("li",[s._v("登录mysql："),t("code",[s._v("mysql -u root -p")])]),s._v(" "),t("li",[s._v("修改密码："),t("code",[s._v("alter user 'root'@'localhost' identified by '密码';")])]),s._v(" "),t("li",[s._v("标记删除mysql服务："),t("code",[s._v("sc delete mysql")])])]),s._v(" "),t("h2",{attrs:{id:"centos安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#centos安装"}},[s._v("#")]),s._v(" CentOS安装")]),s._v(" "),t("h3",{attrs:{id:"yum安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yum安装"}},[s._v("#")]),s._v(" yum安装")]),s._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://dev.mysql.com/doc/mysql-yum-repo-quick-guide/en/"),t("OutboundLink")],1)])]),s._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://blog.imzhengfei.com/centos-7-an-zhuang-pei-zhi-mysql",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://blog.imzhengfei.com/centos-7-an-zhuang-pei-zhi-mysql/"),t("OutboundLink")],1)])])]),s._v(" "),t("blockquote",[t("p",[s._v("首先"),t("code",[s._v("CentOS7")]),s._v("默认已经不支持"),t("code",[s._v("mysql")]),s._v("，因为收费了你懂得，所以内部集成了"),t("code",[s._v("mariadb")]),s._v("，\n而安装"),t("code",[s._v("mysql")]),s._v("的话会和"),t("code",[s._v("mariadb")]),s._v("的文件冲突，所以需要先卸载掉"),t("code",[s._v("mariadb")]),s._v("，以下为卸载"),t("code",[s._v("mariadb")]),s._v("，安装"),t("code",[s._v("mysql")]),s._v("的步骤。")])]),s._v(" "),t("p",[t("strong",[s._v("卸载")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看软件包")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -qa "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -i "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"mariadb\\|mysql"')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# --nodeps强制卸载")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" -e --nodeps mariadb-libs-5.5.56-2.el7.x86_64\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 检测系统是否存在mysql")]),s._v("\nyum list installed "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysql\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除mysql依赖项")]),s._v("\nyum remove -y mysql mysql-server mysql-libs mysql-server\n")])])]),t("ul",[t("li",[s._v("查找残留目录")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("whereis")]),s._v(" mysql\n")])])]),t("p",[t("strong",[s._v("安装依赖")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" libaio glibc\n")])])]),t("p",[t("strong",[s._v("下载yum源")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MySQL 8.0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://repo.mysql.com//mysql80-community-release-el7-1.noarch.rpm\n")])])]),t("p",[t("strong",[s._v("安装yum源")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum -y localinstall mysql80-community-release-el7-1.noarch.rpm\n")])])]),t("p",[t("strong",[s._v("查看所有版本")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum repolist all "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysql\n")])])]),t("blockquote",[t("p",[s._v("可以看到这里默认启用了"),t("code",[s._v("MySQL 8.0 Community Server")]),s._v("，而我们需要安装的是"),t("code",[s._v("MySQL 5.7 Community Server")])])]),s._v(" "),t("p",[t("strong",[s._v("修改源设置")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/yum.repos.d/mysql-community.repo\n")])])]),t("ul",[t("li",[s._v("找到mysql57-community节点")])]),s._v(" "),t("blockquote",[t("p",[s._v("将"),t("code",[s._v("enabled=0")]),s._v("改成"),t("code",[s._v("enabled=1")])])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysql57-community"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("MySQL "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.7")]),s._v(" Community Server\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseurl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://repo.mysql.com/yum/mysql-5.7-community/el/7/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$basearch")]),s._v("/\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgkey")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql\n")])])]),t("ul",[t("li",[s._v("找到"),t("code",[s._v("mysql80-community")]),s._v("节点")])]),s._v(" "),t("blockquote",[t("p",[s._v("将"),t("code",[s._v("enabled=1")]),s._v("改成"),t("code",[s._v("enabled=0")])])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysql80-community"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("MySQL "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8.0")]),s._v(" Community Server\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("baseurl")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("http://repo.mysql.com/yum/mysql-8.0-community/el/7/"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$basearch")]),s._v("/\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gpgcheck")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])])]),t("ul",[t("li",[s._v("或者使用命令")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁用MySQL版本")]),s._v("\nyum-config-manager --disable mysql80-community\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用MySQL版本")]),s._v("\nyum-config-manager --enable mysql57-community\n")])])]),t("p",[t("strong",[s._v("查看默认启用版本")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum repolist enabled "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" mysql\n")])])]),t("p",[t("strong",[s._v("安装")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("yum -y "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" mysql-community-server\n")])])]),t("p",[t("strong",[s._v("查看安装版本")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("mysqld -V\n")])])]),t("h3",{attrs:{id:"编译安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#编译安装"}},[s._v("#")]),s._v(" 编译安装")]),s._v(" "),t("p",[t("strong",[s._v("下载")])]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://dev.mysql.com/downloads/mysql/5.7.html#downloads",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://dev.mysql.com/downloads/mysql/5.7.html#downloads"),t("OutboundLink")],1)])]),s._v(" "),t("p",[t("img",{attrs:{src:"/images/MySQL-glibc%E4%B8%8B%E8%BD%BD.png",alt:""}})]),s._v(" "),t("p",[t("strong",[s._v("解压")])]),s._v(" "),t("blockquote",[t("p",[s._v("建议：不要安装到其它目录，否则数据库初始化的时候会报"),t("code",[s._v("cannot change dir")]),s._v("的错")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" zxvf mysql-5.7.22-linux-glibc2.12-x86_64.tar.gz -C /usr/local/mysql\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重命名")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" mysql-5.7.22-linux-glibc2.12-x86_64 mysql\n")])])]),t("p",[t("strong",[s._v("创建用户组")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("group "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" mysql\n")])])]),t("p",[t("strong",[s._v("创建用户")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("user "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -r -g mysql mysql\n")])])]),t("ul",[t("li",[t("p",[s._v("为了安全性，给mysql数据库创建专有用户，该用户只能访问mysql目录，不能访问系统其它目录")])]),s._v(" "),t("li",[t("p",[s._v("另外不建议直接用root初始化mysql，否则连接mysql时会报错：")])])]),s._v(" "),t("blockquote",[t("p",[t("code",[s._v('[ERROR] Fatal error: Please read "Security" section of the manual to find out how to run mysqld as root!')])])]),s._v(" "),t("p",[t("strong",[s._v("创建data目录")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/mysql\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" data\n")])])]),t("p",[t("strong",[s._v("指定用户和用户组")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chown")]),s._v(" -R mysql mysql/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chgrp")]),s._v(" -R mysql mysql/\n")])])]),t("blockquote",[t("p",[t("code",[s._v("-R")]),s._v("包含目录下所有和目录和文件")])]),s._v(" "),t("p",[t("strong",[s._v("初始化")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/mysql/bin\n\n./mysqld --initialize --user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--basedir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--datadir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/data/ "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--lc_messages_dir"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/share "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--lc_messages"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("en_US\n")])])]),t("blockquote",[t("p",[s._v("记住生成的临时密码,如果忘记密码或者想重新初始化，可以先将"),t("code",[s._v("mysql/data")]),s._v("目录中文件删除，然后再执行初始化命令")])]),s._v(" "),t("p",[t("strong",[s._v("启动")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/mysql/bin\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动")]),s._v("\n./mysqld_safe --user"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])]),t("p",[t("strong",[s._v("设为开机启动")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /usr/local/mysql/support-files/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" mysql.server /etc/init.d/mysql\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/init.d/mysql\n")])])]),t("blockquote",[t("p",[s._v("将mysql目录填上")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("basedir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("datadir")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/data/\n")])])]),t("p",[t("strong",[s._v("授权")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chmod")]),s._v(" +x /etc/init.d/mysql\n")])])]),t("p",[t("strong",[s._v("添加开机启动")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("chkconfig")]),s._v(" --add mysql\n")])])]),t("p",[t("strong",[s._v("service启动")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 重启服务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql restart\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止服务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql stop\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启动服务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql start\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看服务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" mysql status\n")])])]),t("h2",{attrs:{id:"配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置")]),s._v(" "),t("ul",[t("li",[s._v("5.7动态参数 "),t("a",{attrs:{href:"https://dev.mysql.com/doc/refman/5.7/en/dynamic-system-variables.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("5.7 Dynamic System Variables"),t("OutboundLink")],1)]),s._v(" "),t("li",[s._v("8.0动态参数 "),t("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/dynamic-system-variables.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("8.0 Dynamic System Variables"),t("OutboundLink")],1),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/innodb-parameters.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://dev.mysql.com/doc/refman/8.0/en/innodb-parameters.html"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("code",[s._v("set persist")]),s._v(" 修改并持久化动态参数")]),s._v(" "),t("li",[t("code",[s._v("set persist_only")]),s._v(" 持久化静态参数")])])]),s._v(" "),t("li",[t("a",{attrs:{href:"https://dev.mysql.com/doc/refman/8.0/en/server-system-variables.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("服务器系统变量 - 官网"),t("OutboundLink")],1)])]),s._v(" "),t("blockquote",[t("p",[s._v("从5.7.17后mysql就没有默认的"),t("code",[s._v("my_default.cnf")]),s._v("文件，需要手动创建")])]),s._v(" "),t("blockquote",[t("p",[s._v("windows在mysql目录下创建一个ini或cnf配置文件")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/my.cnf\n")])])]),t("blockquote",[t("p",[s._v("按"),t("code",[s._v("i")]),s._v("后输入以下内容")])]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# sql_mode = NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES ")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 一般配置选项")]),s._v("\nbasedir "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /usr/local/mysql/\ndatadir "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /usr/local/mysql/data\nport "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\ncharacter-set-server "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" utf8\nexplicit_defaults_for_timestamp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# socket = /var/run/mysqld/mysqld.sock")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 0：区分大小写，1：不区分大小写")]),s._v("\nlower_case_table_names "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#下面是可选项，要不要都行，如果出现启动错误，则全部注释掉，")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#保留最基本的配置选项，然后尝试添加某些配置项后启动，检测配置项是否有误")]),s._v("\nback_log "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("300")]),s._v("\nmax_connections "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3000")]),s._v("\nmax_connect_errors "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("50")]),s._v("\ntable_open_cache "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v("\nmax_allowed_packet "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#binlog_cache_size = 4M")]),s._v("\n\nmax_heap_table_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 128M\nread_rnd_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\nsort_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\njoin_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\nthread_cache_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\nquery_cache_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 128M\nquery_cache_limit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 4M\nft_min_word_len "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认开启事件调度器ON或者是1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("event_scheduler")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON\nthread_stack "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 512K\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认是REPEATABLE-READ，改成读已提交")]),s._v("\ntransaction-isolation"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("READ-COMMITTED\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#永久设置手动提交事务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#autocommit=0")]),s._v("\ntmp_table_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 128M\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#log-bin=mysql-bin")]),s._v("\nlong_query_time "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("server_id")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n\ninnodb_buffer_pool_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 1G\ninnodb_thread_concurrency "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\ninnodb_log_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\n\ninnodb_log_file_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 512M\ninnodb_log_files_in_group "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\ninnodb_max_dirty_pages_pct "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),s._v("\ninnodb_lock_wait_timeout "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("120")]),s._v("\ninnodb_file_per_table "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" on\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqldump"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nquick\nmax_allowed_packet "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nno-auto-rehash\ndefault-character-set"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("utf8\nsafe-updates\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("myisamchk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nkey_buffer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\nsort_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\nread_buffer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 8M\nwrite_buffer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 8M\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqlhotcopy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ninteractive-timeout\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld_safe"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nopen-files-limit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8192")]),s._v("\n\n")])])]),t("h3",{attrs:{id:"yum安装配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#yum安装配置"}},[s._v("#")]),s._v(" yum安装配置")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#password   = your_password")]),s._v("\nport        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\nsocket      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/lib/mysql/mysql.sock\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nport        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\nsocket      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/lib/mysql/mysql.sock\ndatadir "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/lib/mysql\nsymbolic-links"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\nlog-error"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/log/mysqld.log\npid-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/run/mysqld/mysqld.pid\nskip-external-locking\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("performance_schema_max_table_instances")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("table_definition_cache")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("\nkey_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\nmax_allowed_packet "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 100G\ntable_open_cache "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("\nsort_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 768K\nnet_buffer_length "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 8K\nread_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 768K\nread_rnd_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 512K\nmyisam_sort_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 8M\nthread_cache_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\nquery_cache_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\ntmp_table_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\nsql-mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\n\nexplicit_defaults_for_timestamp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#skip-networking")]),s._v("\nmax_connections "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v("\nmax_connect_errors "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\nopen_files_limit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 0：区分大小写，1：不区分大小写")]),s._v("\nlower_case_table_names "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认开启事件调度器ON或者是1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("event_scheduler")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON\n\nthread_stack "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 512K\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认是REPEATABLE-READ，改成读已提交")]),s._v("\ntransaction-isolation"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("READ-COMMITTED\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#永久设置手动提交事务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#autocommit=0")]),s._v("\ntmp_table_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 128M\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注释掉之后，会关闭binlog日志")]),s._v("\nlog-bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql-bin\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注释掉之后，会关闭binlog日志")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("binlog_format")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mixed\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据库ID号,为1时表示为Master,其中master_id必须为1到232–1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 之间的一个正整数值，主从server-id不能一样;")]),s._v("\nserver-id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#自动删除5天前的日志。默认值为0，表示从不删除。")]),s._v("\nexpire_logs_days "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slow_query_log")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nslow-query-log-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/lib/mysql/mysql-slow.log\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("long_query_time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#log_queries_not_using_indexes=on")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MySQL5.7.11拥有，默认值为keyring_file，")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# InnoDB表空间在初始化InnoDB之前需要此插件来加密，")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MySQL5.7.12及以后此参数默认为空")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#early-plugin-load = ""')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-trx=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-locks=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-lock-waits=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp-per-index=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp-per-index-reset=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp-reset=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmpmem=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmpmem-reset=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-buffer-page=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-buffer-page-lru=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-buffer-pool-stats=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-metrics=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-default-stopword=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-inserted=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-deleted=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-being-deleted=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-config=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-index-cache=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-index-table=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-tables=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-tablestats=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-indexes=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-columns=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-fields=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-foreign=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-foreign-cols=0")]),s._v("\n\ndefault_storage_engine "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" InnoDB\ninnodb_data_home_dir "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/lib/mysql\ninnodb_data_file_path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ibdata1:10M:autoextend\ninnodb_log_group_home_dir "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /var/lib/mysql\ninnodb_buffer_pool_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 128M\ninnodb_log_file_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 64M\ninnodb_log_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\ninnodb_flush_log_at_trx_commit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\ninnodb_lock_wait_timeout "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("120")]),s._v("\ninnodb_max_dirty_pages_pct "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),s._v("\ninnodb_read_io_threads "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\ninnodb_write_io_threads "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqldump"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nquick\nmax_allowed_packet "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nno-auto-rehash\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("myisamchk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nkey_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\nsort_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 768K\nread_buffer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 2M\nwrite_buffer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 2M\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqlhotcopy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ninteractive-timeout\n")])])]),t("h3",{attrs:{id:"宝塔面板安装配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#宝塔面板安装配置"}},[s._v("#")]),s._v(" 宝塔面板安装配置")]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("client"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#password   = your_password")]),s._v("\nport        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\nsocket      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /tmp/mysql.sock\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqld"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nport        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3306")]),s._v("\nsocket      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /tmp/mysql.sock\ndatadir "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /usr/local/mysql/data\nskip-external-locking\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("performance_schema_max_table_instances")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("table_definition_cache")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("400")]),s._v("\nkey_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\nmax_allowed_packet "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 100G\ntable_open_cache "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("\nsort_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 768K\nnet_buffer_length "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 8K\nread_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 768K\nread_rnd_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 512K\nmyisam_sort_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 8M\nthread_cache_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("\nquery_cache_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\ntmp_table_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\nsql-mode"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("NO_ENGINE_SUBSTITUTION,STRICT_TRANS_TABLES\n\nexplicit_defaults_for_timestamp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#skip-networking")]),s._v("\nmax_connections "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("500")]),s._v("\nmax_connect_errors "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\nopen_files_limit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 0：区分大小写，1：不区分大小写")]),s._v("\nlower_case_table_names "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认开启事件调度器ON或者是1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("event_scheduler")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("ON\n\nthread_stack "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 512K\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#默认是REPEATABLE-READ，改成读已提交")]),s._v("\ntransaction-isolation"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("READ-COMMITTED\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#永久设置手动提交事务")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#autocommit=0")]),s._v("\ntmp_table_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 128M\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注释掉之后，会关闭binlog日志")]),s._v("\nlog-bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mysql-bin\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#注释掉之后，会关闭binlog日志")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("binlog_format")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mixed\nserver-id "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#自动删除5天前的日志。默认值为0，表示从不删除。")]),s._v("\nexpire_logs_days "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("slow_query_log")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\nslow-query-log-file"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/mysql/data/mysql-slow.log\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("long_query_time")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#log_queries_not_using_indexes=on")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MySQL5.7.11拥有，默认值为keyring_file，")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# InnoDB表空间在初始化InnoDB之前需要此插件来加密，")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# MySQL5.7.12及以后此参数默认为空")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('#early-plugin-load = ""')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-trx=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-locks=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-lock-waits=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp-per-index=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp-per-index-reset=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmp-reset=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmpmem=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-cmpmem-reset=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-buffer-page=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-buffer-page-lru=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-buffer-pool-stats=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-metrics=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-default-stopword=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-inserted=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-deleted=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-being-deleted=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-config=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-index-cache=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-ft-index-table=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-tables=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-tablestats=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-indexes=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-columns=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-fields=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-foreign=0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#loose-innodb-sys-foreign-cols=0")]),s._v("\n\ndefault_storage_engine "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" InnoDB\ninnodb_data_home_dir "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /usr/local/mysql/data\ninnodb_data_file_path "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ibdata1:10M:autoextend\ninnodb_log_group_home_dir "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" /usr/local/mysql/data\ninnodb_buffer_pool_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 128M\ninnodb_log_file_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 64M\ninnodb_log_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\ninnodb_flush_log_at_trx_commit "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\ninnodb_lock_wait_timeout "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("120")]),s._v("\ninnodb_max_dirty_pages_pct "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),s._v("\ninnodb_read_io_threads "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\ninnodb_write_io_threads "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqldump"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nquick\nmax_allowed_packet "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 16M\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysql"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nno-auto-rehash\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("myisamchk"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nkey_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 32M\nsort_buffer_size "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 768K\nread_buffer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 2M\nwrite_buffer "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 2M\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("mysqlhotcopy"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\ninteractive-timeout\n")])])]),t("blockquote",[t("p",[s._v("按"),t("code",[s._v("ESC")]),s._v("后输入"),t("code",[s._v(":wq")]),s._v("退出")])]),s._v(" "),t("h1",{attrs:{id:"返回顶部"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#返回顶部"}},[s._v("#")]),s._v(" "),t("a",{attrs:{href:"#readme"}},[s._v("返回顶部")])])])}),[],!1,null,null,null);a.default=n.exports}}]);